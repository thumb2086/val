<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>特戰英豪原型</title>
    <link rel="stylesheet" href="/style.css">
    <!-- Google Fonts & Font Awesome -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    
</head>
<body>
    <script>
      // 確認瀏覽器主控台可用與 DOM 已解析
      console.log('[HTML] DOM parsing...');
      document.addEventListener('DOMContentLoaded', () => {
        console.log('[HTML] DOMContentLoaded');
      });
    </script>

    <!-- Auth Screen -->
    <div id="auth-screen" class="menu-screen">
        <div class="menu-content">
            <div class="auth-tabs">
                <button id="login-tab" class="auth-tab active">登入</button>
                <button id="register-tab" class="auth-tab">註冊</button>
            </div>
            <div id="login-form">
                <h2>登入</h2>
                <input type="text" id="login-username" placeholder="使用者名稱" class="auth-input" autocomplete="username">
                <input type="password" id="login-password" placeholder="密碼" class="auth-input" autocomplete="current-password">
                <button id="login-btn" class="btn btn-primary">登入</button>
            </div>
            <div id="register-form" class="hidden">
                <h2>註冊</h2>
                <input type="text" id="register-username" placeholder="使用者名稱" class="auth-input" autocomplete="username">
                <input type="password" id="register-password" placeholder="密碼" class="auth-input" autocomplete="new-password">
                <button id="register-btn" class="btn btn-primary">註冊</button>
            </div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div id="main-menu-screen" class="menu-screen">
        <div class="menu-content">
            <h1>PROTOTYPE</h1>
            <nav class="main-menu-nav">
                <button id="multiplayer-btn" class="btn btn-primary"><i class="fa-solid fa-users"></i> 多人對戰</button>
                <button id="target-practice-settings-btn" class="btn btn-primary"><i class="fa-solid fa-crosshairs"></i> 靶場練習</button>
                <button id="weapon-skins-btn" class="btn btn-primary"><i class="fa-solid fa-paintbrush"></i> 武器塗裝</button>
                <button id="settings-btn" class="btn btn-primary"><i class="fa-solid fa-gear"></i> 設置</button>
            </nav>
        </div>
    </div>

    <!-- Multiplayer Screen -->
    <div id="multiplayer-screen" class="menu-screen">
        <div class="menu-content" style="max-width: 800px;">
            <h2>多人對戰</h2>
            <div class="multiplayer-lobby">
                <!-- Left Column: Create Room -->
                <div class="lobby-column">
                    <h3>創建房間</h3>
                    <div class="game-mode-selection">
                        <h4>遊戲模式</h4>
                        <div class="radio-group">
                            <label><input type="radio" name="gameMode" value="deathmatch" checked> 死鬥 (Deathmatch)</label>
                            <label><input type="radio" name="gameMode" value="skirmish"> 小規模衝突 (Skirmish)</label>
                            <label><input type="radio" name="gameMode" value="5v5"> 5v5 拆彈 (Bomb Defusal)</label>
                        </div>
                    </div>
                    <div id="kill-limit-setting" class="setting-item">
                        <label for="kill-limit-input">擊殺限制:</label>
                        <input type="number" id="kill-limit-input" value="20" min="1" max="100" class="auth-input">
                    </div>
                    <div id="bot-count-setting" class="setting-item">
                        <label for="bot-count-input">機器人數量:</label>
                        <input type="number" id="bot-count-input" value="1" min="0" max="7" class="auth-input">
                    </div>
                    <button id="create-room-btn" class="btn btn-primary">創建房間</button>
                </div>

                <!-- Right Column: Join Room / Room Info -->
                <div class="lobby-column">
                    <div id="join-create-room-section">
                        <h3>加入房間</h3>
                        <input type="text" id="room-id-input" placeholder="輸入房間號碼" class="auth-input">
                        <button id="join-room-btn" class="btn btn-primary">加入房間</button>
                    </div>
                    <div id="room-info" class="hidden">
                        <h3>房間資訊</h3>
                        <p><strong>房間號碼:</strong> <span id="room-id-display"></span></p>
                        <p><strong>房主:</strong> <span id="room-host-display"></span></p>
                        <h4 style="margin-top: 1rem;">玩家列表</h4>
                        <ul id="player-list"></ul>
                        <div class="multiplayer-buttons">
                            <button id="start-game-btn" class="btn btn-primary">開始遊戲</button>
                            <button id="switch-team-btn" class="btn btn-secondary">切換隊伍</button>
                            <button id="leave-room-btn" class="btn btn-secondary">退出房間</button>
                        </div>
                    </div>
                </div>
            </div>
            <button id="back-to-main-multiplayer" class="btn btn-secondary" style="margin-top: 2rem;">返回主選單</button>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="menu-screen">
        <div class="menu-content">
            <h2>設置</h2>
            <div class="setting-item">
                <label for="sensitivity-slider" style="display: block; margin-bottom: 0.5rem;">
                    滑鼠靈敏度: <span id="sensitivity-value">1.0</span>
                </label>
                <input type="range" id="sensitivity-slider" min="0.1" max="3" step="0.1" value="1.0" style="width: 100%;">
            </div>
            <!-- Developer Option Toggle -->
            <div class="setting-item">
                <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                    <input type="checkbox" id="dev-mode-toggle">
                    開發者選項：顯示進階視圖調節（含槍口偏移）
                </label>
                <small style="color:#9ad;">預設隱藏進階調參；啟用後顯示旋轉與槍口偏移等細節控制。</small>
            </div>
            
            <button id="close-settings" class="btn btn-secondary">關閉</button>
        </div>
    </div>

    <!-- Weapon Skins Screen -->
    <div id="weapon-skins-screen" class="menu-screen">
        <div class="menu-content">
            <h2>武器塗裝</h2>
            <div id="weapon-skins-list"></div>
            <button id="open-tuner" class="btn btn-primary" style="margin-top: 10px;">調整當前視圖</button>
            <button id="close-skins" class="btn btn-secondary" style="margin-top: 20px;">關閉</button>
        </div>
    </div>

    <!-- Practice Range Settings Screen -->
    <div id="practice-settings-screen" class="menu-screen">
        <div class="menu-content">
            <h2>靶場設置</h2>
            <div class="setting-item">
                <label for="target-count-input">靶子數量:</label>
                <input type="number" id="target-count-input" value="10" min="1" max="100">
            </div>
            <button id="start-practice-btn" class="btn btn-primary">開始練習</button>
            <button id="back-to-main-from-practice-settings" class="btn btn-secondary">返回主選單</button>
        </div>
    </div>
    
    <!-- Pause Menu -->
    <div id="pause-screen" class="menu-screen">
        <div class="menu-content">
            <h2>已暫停</h2>
            <button id="resume-game" class="btn btn-primary">繼續遊戲</button>
            <button id="pause-settings" class="btn btn-primary">設置</button>
            <button id="back-to-main-pause" class="btn btn-secondary">回到主選單</button>
        </div>
    </div>

    <!-- Crosshair -->
    <div id="crosshair">
        <div class="crosshair-line" id="crosshair-top"></div>
        <div class="crosshair-line" id="crosshair-bottom"></div>
        <div class="crosshair-line" id="crosshair-left"></div>
        <div class="crosshair-line" id="crosshair-right"></div>
    </div>

    <!-- Game Stats Overlay -->
    <div id="game-stats-overlay" style="display: none; position: absolute; top: 10px; left: 10px; color: white; font-family: 'Inter', sans-serif; font-size: 1.2rem; text-shadow: 1px 1px 2px black; z-index: 100;">
        <div id="kill-feed"></div>
        <div id="player-kills"></div>
    </div>

    <!-- Health Display -->
    <div id="health-display" style="display: none; position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: rgba(255, 0, 0, 0.7); width: 200px; height: 20px; border-radius: 5px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.5); z-index: 100;">
        <div id="health-bar" style="width: 100%; height: 100%; background-color: #00ff00; transition: width 0.2s ease-out;"></div>
        <div id="health-text" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; text-shadow: 1px 1px 2px black;">100</div>
    </div>

    <!-- Ammo Display -->
    <div id="ammo-display" style="display: none; position: absolute; bottom: 80px; right: 20px; color: white; font-family: 'Inter', sans-serif; font-size: 1.5rem; text-shadow: 1px 1px 2px black; z-index: 100; text-align: right;">
        <span id="ammo-text">30 / 30</span>
    </div>

    <!-- Weapon & Skin Display -->
    <div id="weapon-info-display" style="display: none; position: absolute; bottom: 20px; right: 20px; color: white; font-family: 'Noto Sans TC', sans-serif; font-size: 1.2rem; text-shadow: 1px 1px 2px black; z-index: 100; text-align: right;">
        <div id="weapon-name-text" style="font-weight: 700; font-size: 1.4rem;">Vandal</div>
        <div id="skin-name-text" style="font-size: 1rem; color: #cde;">Default</div>
    </div>

    <!-- Load app bundle (includes socket.io-client) -->
    <script src="/bundle.js" defer></script>
</body>
</html>